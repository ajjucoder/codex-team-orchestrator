# AT-003 SQLite Persistence and Migrations

Implemented:
- Initial migration with core tables for teams, agents, messages, inbox, tasks, artifacts, and structured run events
- SQLite pragmas for durability/locking behavior (`WAL`, `busy_timeout`, `foreign_keys`)
- Explicit retry strategy for lock contention (`SQLITE_BUSY`/`database is locked`)
- Idempotent message insert path using unique `(team_id, idempotency_key)`

Acceptance notes:
- Migration records applied versions in `schema_migrations`
- Persistence CRUD works for core lifecycle entities
- Inbox delivery + acknowledgment and idempotent message behavior validated in integration tests
