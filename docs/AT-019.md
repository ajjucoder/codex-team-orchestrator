# AT-019 Hardening Pass (Resilience/Security/Performance Edge Cases)

Implemented:
- Team-scoped authorization guard in tool invocation context (`auth_team_id`, `auth_agent_id`)
- In-team membership enforcement for message bus tools:
  - `team_send` validates sender/receiver membership in `team_id`
  - `team_broadcast` validates sender membership in `team_id`
  - `team_pull_inbox` validates inbox agent membership in `team_id`
- Payload hardening limits:
  - message summary max length
  - max artifact refs per message
  - artifact content max size
- Resumable lifecycle support via `team_resume`
- Smoke tests (`small`, `medium`, `high`) to enforce adaptive fan-out bands and hard cap

Acceptance notes:
- Unauthorized cross-team tool calls are blocked
- Cross-team agent injection into team messaging/inbox flows is rejected
- Secret values are redacted in structured logs
- Oversized payloads are rejected before persistence
- Smoke runs verify no scenario exceeds `max_threads=6`
