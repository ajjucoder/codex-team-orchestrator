# V2-002 Permission Profile Model and Contracts

## Scope
Define explicit permission profile contracts for policy-driven role bindings, while preserving backward compatibility with legacy `permissions` maps.

## Implemented
1. Permission profile resolver and validator module:
   - `mcp/server/permission-profiles.ts`
2. Validation wiring in lifecycle/policy tools:
   - `mcp/server/tools/team-lifecycle.ts`
   - `mcp/server/tools/policies.ts`
3. Agent spawn permission profile resolution migrated to shared resolver:
   - `mcp/server/tools/agent-lifecycle.ts`
4. Policy profile YAMLs updated with v2 permission fields:
   - `profiles/default.team.yaml`
   - `profiles/fast.team.yaml`
   - `profiles/deep.team.yaml`
5. Schema contract for permission profiles:
   - `mcp/schemas/entities/permission_profile.schema.json`
   - `mcp/schemas/contracts.ts`

## Acceptance Criteria
1. Invalid permission configs are rejected by team start/profile swap tools.
2. Valid permission configs resolve deterministic role/default profile bindings.
3. Legacy `permissions` map style remains supported for existing policies/tests.
4. Typecheck and regression tests remain passing.

## Evidence
- `docs/v2-baseline/v2-002-permission-contracts.txt`
