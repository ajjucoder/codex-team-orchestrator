
> codex-team-orchestrator@1.0.0 test:integration
> node --import tsx --test tests/integration/**/*.test.ts

✔ AT-001 lint script is runnable from integration path (2413.441375ms)
✔ AT-002 integration: representative contracts validate end-to-end (1.23275ms)
(node:4454) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-003 integration: message idempotency and inbox delivery (92.799625ms)
(node:4456) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-004 integration: server logs structured tool events (65.918042ms)
(node:4458) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-005 integration: lifecycle tools emit structured events and persist state (7.176083ms)
(node:4460) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-006 integration: broadcast + inbox pull/ack works through message bus (25.802917ms)
✔ AT-006 integration: broadcast duplicate suppression and delta refs reduce bus traffic (18.244167ms)
✔ AT-006 integration: optional policy model routing applies per role while preserving defaults (14.114166ms)
✔ AT-006 integration: spawn-ready-roles uses DAG-ready required_role hints only (62.336166ms)
(node:4462) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-007 integration: conflicting claims result in single winner (15.6945ms)
✔ AT-007 integration: DAG-ready queue returns unblocked tasks in priority order (4.934083ms)
✔ AT-007 integration: loser-cancel policy emits cancellation and removes branches from ready queue (10.288375ms)
✔ AT-007 integration: ready tasks preserve required_role hints for spawn shaping (5.784208ms)
(node:4464) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-008 integration: published artifact refs are exchanged via compact messages (13.199083ms)
(node:4466) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-009 integration: role catalog and spawn interplay produces structured traces (7.073708ms)
(node:4493) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-010 integration: arbitration decision persisted in structured events (16.418958ms)
(node:4504) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-011 integration: profile swap changes behavior without code edits (11.688083ms)
(node:4512) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-012 integration: adaptive fanout produces small/medium/high bands with hard cap (8.100209ms)
✔ AT-012 integration: fanout uses telemetry estimator when token cost is omitted (70.598166ms)
✔ AT-012 integration: fanout can use global telemetry when local team is cold (9.397875ms)
(node:4515) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-013 integration: idle sweep finalizes stale teams and logs structured events (8.705667ms)
(node:4532) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-014 integration: replay returns ordered events and summary reflects activity (11.185583ms)
(node:4535) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-015 integration: trigger phrase creates orchestration team and logs invocation (7.879625ms)
✔ AT-015 integration: complexity-based trigger auto-spawns workers within cap (37.735292ms)
✔ AT-015 integration: trigger fanout planning defaults to telemetry estimator (31.145666ms)
✔ AT-016 integration: install/check/uninstall scripts succeed in isolated CODEX_HOME (198.960584ms)
(node:4719) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-017 integration: benchmark script emits pass gate and report artifact (458.800333ms)
✔ AT-018 integration: release packaging script creates distributable archive (277.4835ms)
(node:4662) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4750) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4764) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4777) ExperimentalWarning: SQLite is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
✔ AT-019 integration: smoke scripts validate fanout bands and hard cap (206.256625ms)
✔ AT-019 integration: cross-team messaging is denied while in-team messaging is allowed (11.244958ms)
ℹ tests 30
ℹ suites 0
ℹ pass 30
ℹ fail 0
ℹ cancelled 0
ℹ skipped 0
ℹ todo 0
ℹ duration_ms 2901.957458
