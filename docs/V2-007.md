# V2-007 Mode Transition APIs and Safety Controls

## Scope
Add controlled mode transition APIs with transition constraints, lead-role authorization, audit events, and optional TTL auto-reset.

## Implemented
1. New mode tools:
   - `mcp/server/tools/modes.ts`
   - `mcp/schemas/tools/team_mode_get.schema.json`
   - `mcp/schemas/tools/team_mode_set.schema.json`
2. Store metadata update support for transition state:
   - `mcp/store/sqlite-store.ts`
3. Contract registration for new tools:
   - `mcp/schemas/contracts.ts`
4. Transition validation, role checks, rollback, and TTL reset tests:
   - `tests/unit/v2-007.mode-transitions.test.ts`
   - `tests/integration/v2-007.mode-transitions.integration.test.ts`

## Acceptance Criteria
1. Invalid transitions are blocked and do not mutate persisted mode.
2. Mode transitions require authorized lead actor context.
3. Transition events are logged with actor and reason.
4. TTL-based transitions auto-reset to `default` safely.

## Evidence
- `docs/v2-baseline/v2-007-mode-transitions.txt`
