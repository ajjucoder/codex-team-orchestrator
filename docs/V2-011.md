# V2-011 Orphan Recovery and Deterministic Cleanup

## Scope
Recover orphaned work after interruptions by sweeping expired task leases and stale agents with idempotent recovery semantics.

## Implemented
1. Store recovery primitives:
   - `mcp/store/sqlite-store.ts`
   - `recoverExpiredTaskLeases`
   - `markStaleAgentsOffline`
2. Recovery tool:
   - `mcp/server/tools/recovery.ts`
   - `mcp/schemas/tools/team_orphan_recover.schema.json`
   - `mcp/schemas/contracts.ts`
3. Deterministic/idempotent recovery tests:
   - `tests/unit/v2-011.orphan-recovery.test.ts`
   - `tests/integration/v2-011.orphan-recovery.integration.test.ts`

## Acceptance Criteria
1. Expired in-progress work is safely re-queued.
2. Stale agents are marked offline without cross-team side effects.
3. Recovery can run repeatedly with idempotent outcomes.
4. Crash/restart flow can resume by reclaiming recovered tasks.

## Evidence
- `docs/v2-baseline/v2-011-orphan-recovery.txt`
