# V2-012 Multi-Team Hierarchy Data Model

## Scope
Introduce first-class parent/child team hierarchy metadata and query primitives for hierarchical orchestration.

## Implemented
1. Team hierarchy migration:
   - `mcp/store/migrations/006_team_hierarchy.sql`
   - Adds `parent_team_id`, `root_team_id`, `hierarchy_depth`
   - Adds closure table `team_hierarchy` + indexes and legacy backfill
2. Store hierarchy persistence and query APIs:
   - `mcp/store/sqlite-store.ts`
   - `createTeam` parent validation + closure-table writes
   - `listChildTeams`, `listTeamLineage`, `isDescendantTeam`, `listTeamHierarchyLinks`
3. Entity/contracts/schema updates:
   - `mcp/store/entities.ts`
   - `mcp/schemas/entities/team.schema.json`
   - `mcp/schemas/contracts.ts`
   - `mcp/schemas/tools/team_start.schema.json`
4. Team lifecycle hierarchy visibility:
   - `mcp/server/tools/team-lifecycle.ts`
   - `team_start` accepts optional `parent_team_id`
   - `team_status` returns hierarchy metadata fields
5. Validation tests:
   - `tests/unit/v2-012.team-hierarchy.test.ts`
   - `tests/integration/v2-012.team-hierarchy.integration.test.ts`

## Acceptance Criteria
1. Parent-child links are validated on create.
2. Existing teams are backfilled as root teams with depth `0`.
3. Direct and recursive child queries are deterministic.
4. Lineage and descendant checks are queryable from store APIs.

## Evidence
- `docs/v2-baseline/v2-012-team-hierarchy.txt`
